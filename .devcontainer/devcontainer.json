{
  "name": "amiable-dev",
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu",
  "features": {
    "ghcr.io/devcontainers-extra/features/mise:1": {}
  },
  "remoteUser": "vscode",
  "updateRemoteUserUID": true,

  "forwardPorts": [9101],
  "portsAttributes": {
    "9101": {
      "label": "Amiable (sbt)"
    }
  },

  "containerEnv": {},

  "mounts": [
    "source=${localEnv:HOME}/.claude,target=/home/vscode/.claude,readonly,type=bind,consistency=cached",
    "source=${localEnv:HOME}/.gu/amiable,target=/home/vscode/.gu/amiable,readonly,type=bind,consistency=cached"
  ],

  "postCreateCommand": "bash -lc '[ -x .devcontainer/bootstrap.sh ] || (echo \".devcontainer/bootstrap.sh missing or not executable\" && exit 1); .devcontainer/bootstrap.sh'",
  "postStartCommand": "bash -lc 'mise doctor || true'",

  "customizations": {
    "jetbrains": {
      "plugins": ["org.intellij.scala", "com.github.l34130.mise", "com.anthropic.code.plugin", "com.github.copilot"]
    },
    "vscode": {
      "extensions": ["scala-lang.scala", "hverlin.mise-vscode", "anthropic.claude-code", "GitHub.copilot"]
    }
  }
}
