@(stack: Option[String], stage: Option[String], app: Option[String], amis: List[AMI])

@import views.html.fragments.optWithLabel

@main("Instance AMIs") {
    <div class="container">
        <div class="row">
            <h1 class="header green-text text-darken-3">AMIs in use for @optWithLabel(stack, "Stack") @optWithLabel(stage, "Stage") @optWithLabel(app, "App")</h1>
            @for((ami, i) <- amis.sortBy(_.creationDate.map(_.getMillis)).zipWithIndex) {
                @if((i % 3) == 0 && i > 0) {
                </div>
        <div class="row">
        }
            <div class="col m4">
                <dl class="ami-details">
                    <dt>Name</dt>
                    <dd>@ami.name.getOrElse("No name available")</dd>
                    <dt>Image ID</dt>
                    <dd>@ami.imageId</dd>
                    <dt>Description</dt>
                    <dd>@ami.description.getOrElse("No description available")</dd>
                    <dt>Creation date</dt>
                    <dd>@ami.creationDate match {
                        case Some(date) => {
                            @datetime.DateUtils.readableDateTime.print(date) -
                            <span class="@datetime.DateUtils.getAgeColour(date)">@datetime.DateUtils.daysAgo(date) days old</span>
                        }
                        case None => {
                            Too old
                        }
                    }</dd>
                    <dt>ARN</dt>
                    <dd>@ami.arn</dd>
                </dl>
            </div>
        }
        </div>
    </div>

}
